<!doctype html>
<html lang="fr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="node_modules/@gouvfr/dsfr/dist/dsfr.min.css">

    <meta name="theme-color" content="#000091">

    <!-- <link rel="manifest" href="favicon/manifest.webmanifest" crossorigin="use-credentials"> -->
    <!-- Favicon -->
    <link rel="apple-touch-icon" href="img/favicon.png">
    <link rel="icon" href="img/favicon.png" type="image/png">
    <title>Galligeo</title>

    <!-- Imports -->

    <!-- css -->
    <!-- external -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css" integrity="sha256-kLaT2GOSpHechhsozzB+flnD+zUyjE2LlfWPgU04xyI=" crossorigin=""/>
    <link rel="stylesheet" href="https://unpkg.com/leaflet-draw@1.0.4/dist/leaflet.draw-src.css" />
    <!-- <link rel="stylesheet" href="https://unpkg.com/leaflet-geosearch@3.1.0/dist/geosearch.css"/> -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.css" />
    <link rel="stylesheet" href="https://rawgithub.com/ebrelsford/Leaflet.loading/master/src/Control.Loading.css" />

    <!-- internal -->
    <link rel="stylesheet" href="css/main.css"/>
    <link rel="stylesheet" href="css/map.css"/>

    <!-- js -->
    <!-- external -->
    <script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js" integrity="sha256-WBkoXOwTeyKclOHuWtc+i2uENFpDZ9YPdf5Hf+D7ewM=" crossorigin=""></script>
    <script src="https://unpkg.com/leaflet-geosearch@3.1.0/dist/bundle.min.js"></script>
    <script src="https://unpkg.com/leaflet-draw@1.0.4/dist/leaflet.draw-src.js"></script>
    <script src="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.js"></script>
    <script src="https://rawgithub.com/ebrelsford/Leaflet.loading/master/src/Control.Loading.js"></script>

  </head>
  <body>

    <!--  -->
    <!-- HEADER -->
    <!--  -->

    <header role="banner" class="fr-header">
        <div class="fr-header__body">
            <div class="fr-container--fluid">
                <div class="fr-header__body-row">
                    <div class="fr-header__brand fr-enlarge-link" style="margin-left: 24px;">
                        <div class="fr-header__brand-top">
                            <div class="fr-header__logo">
                                <!-- <p< class="fr-logo">
                                    TSE /
                                    <br>IAST
                                </p>> -->
                            </div>
                            <div class="fr-header__operator">
                                <img class="fr-responsive-img" style="width:400px; height:auto;" src="img/galligeo_logo_v3.png" alt="Galligeo" >
                                <!-- L’alternative de l’image (attribut alt) doit impérativement être renseignée et reprendre le texte visible dans l’image -->
                            </div>
                            <div class="fr-header__navbar">
                                <button class="fr-btn--search fr-btn" data-fr-opened="false" aria-controls="modal-575" id="button-576" title="Rechercher">
                                    Rechercher
                                </button>
                                <button class="fr-btn--menu fr-btn" data-fr-opened="false" aria-controls="modal-577" aria-haspopup="menu" id="button-578" title="Menu">
                                    Menu
                                </button>
                                {# <button class="fr-btn fr-icon-star-fill" style="color: yellow;" title="Favoris">
                                    Favoris
                                </button> #}
                            </div>
                        </div>
                        <!-- <div class="fr-header__service">
                            <a href="/" title="Accueil - [À MODIFIER - Nom du site / service] - [À MODIFIER - texte alternatif de l’image : nom de l'opérateur ou du site serviciel] - République Française">
                                <p class="fr-header__service-title">
                                    TSE Data
                                </p>
                            </a>
                            <p class="fr-header__service-tagline">Exploration de données françaises</p>
                        </div> -->
                    </div>
                    <div class="fr-header__tools">
                        <div class="fr-header__tools-links">
                            <ul class="fr-btns-group">
                                <!-- <li>
                                    <a class="fr-btn fr-icon-add-circle-line" href="#" style="color:#ff5555;">
                                        Créer un espace
                                    </a>
                                </li> -->
                                <!--
                                    <li>
                                        <a class="fr-btn fr-icon-lock-line" href="#" style="color:#ff5555;" data-fr-opened="false" aria-controls="fr-modal-login" >
                                            Se connecter
                                        </a>
                                    </li>
                                -->

                                <li>
                                    <button class="fr-btn fr-icon-lock-line" href="#" style="color:#ff5555;"  onclick="window.location.href='https://api.ptm.huma-num.fr/auth/login?redirect_url=https://app.ptm.huma-num.fr/galligeo/ggo.html'">
                                        Se connecter avec ORCID
                                    </button>
                                </li>

                                <!-- <li>
                                    <a class="fr-btn fr-icon-account-line" href="#" style="color:#ff5555;">
                                        S’enregistrer
                                    </a>
                                </li> -->
                            </ul>
                        </div>
                        
                    </div>
                </div>
            </div>
        </div>
        <div class="fr-header__menu fr-modal" id="modal-560" aria-labelledby="button-561" style="display:none ;visibility: hidden;">
            <div class="fr-container">
                <button class="fr-btn--close fr-btn" aria-controls="modal-560" title="Fermer">
                    Fermer
                </button>
                <div class="fr-header__menu-links">
                </div>
                <nav class="fr-nav" id="navigation-564" role="navigation" aria-label="Menu principal">
                    <ul class="fr-nav__list">
                        <li class="fr-nav__item">
                            <a class="fr-nav__link" href="#" target="_self">accès direct</a>
                        </li>
                    </ul>
                </nav>
            </div>
        </div>
    </header>


    <!--  -->
    <!-- NAV -->
    <!--  -->
    <nav class="fr-nav" id="header-navigation" role="navigation" aria-label="Menu principal">

        <div class="fr-grid-row">

            <!-- side bar -->
            <div class="fr-col-2" id="nav-tools-sidebar-control">

                <!-- button close hidden at startup -->
                <!-- button filter complet -->
                <div class="nav-tools-bar-inner-legend-filter item-hover" id="id-nav-tools-bar-inner-legend-filter" onclick="toggleLegend()">
                   
                    <span class="nav-tools-bar-inner-legend-filter-text">
                        <span>Contrôles</span>
                    </span>
                    <div class="nav-tools-bar-inner-legend-filter-icon2">
                        <img src="node_modules/@gouvfr/dsfr/dist/icons/system/arrow-left-line.svg" alt="arrowslineI127"
                            id="nav-tools-bar-inner-legend-filter-icon2-inner">
                    </div>
                </div>

            </div>

            <!-- search bar -->
            <div class="fr-col-6" id="nav-search-bar">
                    <div class="fr-search-bar autocomplete" id="header-search" role="search">
                        <table border=0>
                            <tr>
                            <td><label class="fr-label" for="search-784-input" onkeydown='load_ark_picture()'>
                                (1) Ark : -> Gallica
                            </label>
                            </td><td>
                                <input class="fr-input" placeholder="Entrer une URL Gallica Ark de type : https://gallica.bnf.fr/ark:/12148/btv1b106799487" type="search" id="search-784-input" name="search-784-input"> <!--list="sites_list"> -->
                                    </td><td>
                                <button class="fr-btn" title="Ark : -> Gallica" onclick='load_ark_picture()'>
                                </button>
                            </td></tr>
                        </table>
                    </div>

            </div>

            <div class="fr-col-4" id="nav-tools4">
                
                <button class="fr-btn fr-btn--secondary" id="btn_georef" disabled onclick="click_georef('', list_georef_points, list_points_polygon_crop, input_ark)"> 
                    Géoréférencer
                </button>

                <button class="fr-btn fr-btn--secondary" id="btn_display" disabled onclick="display_result(input_ark)">
                    Résultat
                </button>

                <button class="fr-btn fr-btn--secondary" id="btn_deposit" data-fr-opened="false" aria-controls="fr-modal-deposit" disabled>
                    <!--<button class="fr-btn fr-btn--secondary" id="btn_deposit" data-fr-opened="false" aria-controls="fr-modal-deposit"> -->
                    Déposer
                </button>

            </div>
        </div>

    </nav>
    <!--  -->
    <!-- END NAV -->
    <!--  -->

    <!--  -->
    <!-- Modal deposit  -->
    <!--  -->
    <dialog aria-labelledby="fr-modal-deposit" id="fr-modal-deposit" class="fr-modal" role="dialog" >
        <div class="fr-container fr-container--fluid fr-container-md">
            <div class="fr-grid-row fr-grid-row--center">
                <div class="fr-col-12 fr-col-md-8 fr-col-lg-6">
                    <div class="fr-modal__body">
                        <div class="fr-modal__header">
                            <button class="fr-link--close fr-link" aria-controls="fr-modal-deposit"">Fermer</button>
                        </div>
                        <div class="fr-modal__content">
                            <h1 id="fr-modal-2-title" class="fr-modal__title">
                                <span class="fr-fi-arrow-right-line fr-fi--lg"></span>
                                Dépôt de données : choix d'un entrepôt
                            </h1>

                            <div class="fr-checkbox-group fr-checkbox-group--error" id="group-checkbox-nakala">
                                <input aria-describedby="checkbox-nakala" id="checkbox-nakala" type="checkbox" onchange="clkNakalaDepot()">
                                <label class="fr-label" for="checkbox-nakala">
                                  <a href="https://www.nakala.fr/about" target="_blank" rel="noopener">Nakala</a> : entrepôt de données de l'<a href="https://www.huma-num.fr/" target="_blank" rel="noopener">IR* Huma-Num CNRS</a>
                                </label>
                                <div class="fr-messages-group" id="checkbox-nakala-error" aria-live="assertive">
                                    <p class="fr-message fr-message--error" id="checkbox-nakala-message-error">Cocher et entrer une clé d'API</p>
                                </div>
                                <div class="fr-messages-group" id="checkbox-nakala-ok" aria-live="assertive" style="visibility: hidden; display: none;">
                                    <p class="fr-message fr-message--valid" id="checkboxes-valid-message-valid">Ok</p>
                                </div>
                            </div>

                            <label class="fr-label" for="text-input-text">API Key Nakala</label>
                            <input class="fr-input" type="text" id="nakala_api_key" name="text-input-text" value="66c0810c-19c3-5463-5082-20f04d53b971">
                            <label class="fr-label" for="text-input-text">Collection DOI</label>
                            <input class="fr-input" type="text" id="nakala_collection_doi" name="text-input-text" value="10.34847/nkl.febfl1v2">
                            

                            <br>

                            <div class="fr-checkbox-group fr-checkbox-group--error">
                                <input aria-describedby="checkbox-fnp" id="checkbox-fnp" type="checkbox">
                                <label class="fr-label" for="checkbox-fnp">
                                  <a href="https://www.fabriquenumeriquedupasse.fr/" target="_blank" rel="noopener">La Fabrique Numérique du passé</a> : portail de dépôt de données géohistoriques du <a href="https://paris-timemachine.huma-num.fr/" target="_blank" rel="noopener">Consortium Huma-Num PTM</a>
                                </label>
                                <div class="fr-messages-group" id="checkbox-fnp-error" aria-live="assertive">
                                    <p class="fr-message fr-message--error" id="checkbox-fnp-message-error">Cocher et entrer une clé d'API</p>
                                </div>
                            </div>

                            <label class="fr-label" for="text-input-text">API Key FNP</label>
                            <input class="fr-input" type="text" id="text-input-text" name="text-input-text">
                            
                            <br>

                            <div class="fr-checkbox-group fr-checkbox-group--error" id="group-checkbox-geoserverptm">
                                <input aria-describedby="checkbox-geoserverptm" id="checkbox-geoserverptm" type="checkbox" onchange="clkGeoserver()">
                                <label class="fr-label" for="checkbox-geoserverptm">
                                    GeoServer PTM : dépôt sur le géoserveur du CST Huma-Num PTM
                                </label>
                                <div class="fr-messages-group" id="checkbox-geoserverptm-error" aria-live="assertive">
                                    <p class="fr-message fr-message--error" id="checkbox-geoserverptm-message-error">Cocher</p>
                                </div>
                                <div class="fr-messages-group" id="checkbox-geoserverptm-ok" aria-live="assertive" style="visibility: hidden; display: none;">
                                    <p class="fr-message fr-message--valid" id="checkboxes-valid-message-valid">Ok</p>
                                </div>
                            </div>

                            <br>

                            <h1 id="fr-modal-2-title" class="fr-modal__title">
                                <span class="fr-fi-arrow-right-line fr-fi--lg"></span>
                                Métadonnées d'enrichissement
                            </h1>

                            <div id="modal-deposit-metadata">
                                <fieldset class="fr-fieldset" aria-label="Demande de nom et prénom" aria-describedby="name-1-fieldset-messages">
                                    <div class="fr-fieldset__element">
                                        <div class="fr-input-group">
                                            <label class="fr-label" for="input-family-name-1">
                                                Nom
                                            </label>
                                            <input class="fr-input" spellcheck="false" autocomplete="family-name" name="family-name" id="input-family-name-1" type="text">
                                        </div>
                                    </div>
                                    <div class="fr-fieldset__element">
                                        <div class="fr-input-group">
                                            <label class="fr-label" for="input-firstname-1">
                                                Prénom
                                            </label>
                                            <input class="fr-input" spellcheck="false" autocomplete="given-name" name="given-name" id="input-firstname-1" type="text">
                                        </div>
                                    </div>
                                    <div class="fr-messages-group" aria-live="assertive" id="name-1-fieldset-messages">
                                    </div>
                                    <div class="fr-fieldset__element">
                                        <div class="fr-input-group">
                                            <label class="fr-label">
                                                Institution / Université / Organisme
                                            </label>
                                            <input class="fr-input" id="input-institution" aria-describedby="input-position-1-messages" name="position" type="text" value="">
                                            <div class="fr-messages-group" id="input-position-1-messages" aria-live="assertive">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="fr-messages-group" id="representative-1661-fieldset-messages" aria-live="assertive">
                                    </div>
                                </fieldset>
                            </div>
                        </div>

                        <div class="fr-modal__footer">
                            <ul class="fr-btns-group fr-btns-group--right fr-btns-group--inline-reverse fr-btns-group--inline-lg fr-btns-group--icon-left">
                                <li>
                                    <button class="fr-btn fr-fi-close-line fr-btn--secondary" aria-controls="fr-modal-deposit" onclick="document.getElementById('fr-modal-deposit').close()">
                                        Annuler
                                    </button>
                                </li>
                                <li>
                                    <button class="fr-btn fr-fi-checkbox-line fr-btn--secondary" onclick="deposerSurNakala(document.getElementById('nakala_api_key').value, document.getElementById('nakala_collection_doi').value)">
                                        Déposer
                                    </button>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </dialog>
    <!--  -->
    <!-- END Modal deposit  -->
    <!--  -->


    <!--  -->
    <!-- PANEL-->
    <!--  -->
    <div class="fr-container--fluid">
        <div class="fr-grid-row">

            <div class="fr-col-2" id="sidebar">

                <div class="fr-stepper" style="padding-left: 4px; padding-right: 4px;">
                    <h2 class="fr-stepper__title" id="titre-etape-georef">
                        <span class="fr-stepper__state" id="etape-georef">Étape 1 sur 4</span>
                        Charger un lien ark de Gallica
                    </h2>
                    <div class="fr-stepper__steps" id="steps" data-fr-current-step="1" data-fr-steps="4"></div>
                    <p class="fr-stepper__details" id="etape-suite">
                        <span class="fr-text--bold" >Étape suivante :</span> Créer des points de contrôle
                    </p>
                </div>

                <section class="fr-accordion" id="metadata" hidden>
                    <h3 class="fr-accordion__title">
                        <button class="fr-accordion__btn" aria-expanded="true" aria-controls="text-metadata">Métadonnées Gallica</button>
                    </h3>
                    <div class="fr-collapse" id="text-metadata" style="padding-right: 4px;">
                        <!-- value -->
                    </div>
                </section>

                <section class="fr-accordion" id="table-control-points" hidden>
                    <h3 class="fr-accordion__title">
                        <button class="fr-accordion__btn" aria-expanded="true" aria-controls="div-table-control-points">Points de contrôle</button>
                    </h3>
                    <div class="fr-collapse" id="div-table-control-points" style="padding-right: 4px;">
                        
                        <div class="fr-table fr-table--layout-fixed">
                            <table>
                                <!-- <caption>Résumé du tableau (accessibilité)</caption> -->
                                <thead>
                                    <tr>
                                        <th scope="col">Point source</th>
                                        <th scope="col">Point cible</th>
                                    </tr>
                                </thead>
                                <tbody id='table_body'>
                                    <tr>
                                        <td>Donnée</td>
                                        <td>Donnée</td>
                                    </tr>
                                    <tr>
                                </tbody>
                            </table>
                        </div>

                    </div>
                </section>

            </div>
            
            <div class="fr-col-5" id="map-container-left-at-startup" style="display: flex; visibility: visible">

                    <div class="image_box">
                    <video
                        src="data/galligeo_tuto.webm"
                        type="video/webm"
                        class="image_box-video"
                        autoplay
                        muted
                        loop
                        preload = "auto"
                        >
                        Your browser does not support HTML5 video.
                    </video>
                    </div>

            </div>
            
            <div class="fr-col-5" id="map-container-left">

                <div id="map-left"></div>
            </div>

            <script>
                document.getElementById('map-container-left').style.display = "none"
                document.getElementById('map-container-left').style.visibility = 'hidden';
            </script>

            <div class="fr-col-5" id="map-container-right">

                <div id="map-right"></div>
            </div>

        </div>
        </div>
    
    <!--  -->
    <!-- END MAP -->
    <!--  -->

    <!--  -->
    <!-- Minimalistic FOOTER -->
    <!--  -->
    <footer class="fr-footer" role="contentinfo" id="footer">
        <div class="fr-container">
            
            <div class="fr-footer__bottom">
                <ul class="fr-footer__bottom-list">
                    <li class="fr-footer__bottom-item">
                        <a class="fr-footer__bottom-link" href="#" target="_blank" rel="noopener">Plan du site</a>
                    </li>
                    <li class="fr-footer__bottom-item">
                        <a class="fr-footer__bottom-link" href="#" target="_blank" rel="noopener">Accessibilité : Partiellement conforme</a>
                    </li>
                    <li class="fr-footer__bottom-item">
                        <a class="fr-footer__bottom-link" href="#" target="_blank" rel="noopener">Mentions légales</a>
                    </li>
                    <li class="fr-footer__bottom-item">
                        <a class="fr-footer__bottom-link" href="#" target="_blank" rel="noopener">Données personnelles</a>
                    </li>
                    <li class="fr-footer__bottom-item">
                        <a class="fr-footer__bottom-link" href="#" target="_blank" rel="noopener">Gestion des cookies</a>
                    </li>
                    <li class="fr-footer__bottom-item">
                        <a class="fr-footer__bottom-link" href="https://github.com/etalab/licence-ouverte/blob/master/LO.md" target="_blank" rel="noopener">Licences</a>
                    </li>
                </ul>
                <!-- <div class="fr-footer__bottom-copy">
                    <p>Sauf mention contraire, tous les contenus de ce site sont sous <a href="https://github.com/etalab/licence-ouverte/blob/master/LO.md" target="_blank">licence etalab-2.0</a>
                    </p>
                </div> -->
            </div>
        </div>
    </footer>
    <!--  -->
    <!-- END Minimalistic FOOTER -->
    <!--  -->


    <!--  -->
    <!-- Modal Login-->
    <!--  -->

    <!-- Change the link to the login page
    <dialog aria-labelledby="fr-modal-login" id="fr-modal-login" class="fr-modal" role="dialog" >
        <div class="fr-container fr-container--fluid fr-container-md">
            <div class="fr-grid-row fr-grid-row--center">
                <div class="fr-col-12 fr-col-md-8 fr-col-lg-6">
                    <div class="fr-modal__body">
                        <div class="fr-modal__header">
                            <button class="fr-link--close fr-link" aria-controls="fr-modal-login">Fermer</button>
                        </div>
                        <div class="fr-modal__content">
                            <h1 id="fr-modal-2-title" class="fr-modal__title">
                                <span class="fr-fi-arrow-right-line fr-fi--lg"></span>
                                Connexion à Galligeo
                            </h1>
                            
                            <form id="login-1760">
                                <fieldset class="fr-fieldset" id="login-1760-fieldset" aria-labelledby="login-1760-fieldset-legend login-1760-fieldset-messages">
                                    <legend class="fr-fieldset__legend" id="login-1760-fieldset-legend">
                                        <h2>Se connecter avec son compte</h2>
                                    </legend>
                                    <div class="fr-fieldset__element">
                                        <p class="fr-text--sm">Fonctionnalité non disponible à l'heure actuelle</p>
                                    </div>
                                    <div class="fr-fieldset__element">
                                        <fieldset class="fr-fieldset" id="credentials" aria-labelledby="credentials-messages">
                                            <div class="fr-fieldset__element">
                                                <span class="fr-hint-text">Sauf mention contraire, tous les champs sont obligatoires.</span>
                                            </div>
                                            <div class="fr-fieldset__element">
                                                <div class="fr-input-group">
                                                    <label class="fr-label" for="username-1757">
                                                        Identifiant
                                                        <span class="fr-hint-text">Format attendu : nom@domaine.fr</span>
                                                    </label>
                                                    <input class="fr-input" autocomplete="username" aria-required="true" aria-describedby="username-1757-messages" name="username" id="username-1757" type="text" value="user_test">
                                                    <div class="fr-messages-group" id="username-1757-messages" aria-live="assertive">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="fr-fieldset__element">
                                                <div class="fr-password" id="password-1758">
                                                    <label class="fr-label" for="password-1758-input">
                                                        Mot de passe
                                                    </label>
                                                    <div class="fr-input-wrap">
                                                        <input class="fr-password__input fr-input" aria-describedby="password-1758-input-messages" aria-required="true" name="password" autocomplete="current-password" id="password-1758-input" type="password" value="password">
                                                    </div>
                                                    <div class="fr-messages-group" id="password-1758-input-messages" aria-live="assertive">
                                                    </div>
                                                    <div class="fr-password__checkbox fr-checkbox-group fr-checkbox-group--sm">
                                                        <input aria-label="Afficher le mot de passe" id="password-1758-show" type="checkbox" aria-describedby="password-1758-show-messages">
                                                        <label class="fr-password__checkbox fr-label" for="password-1758-show">
                                                            Afficher
                                                        </label>
                                                        <div class="fr-messages-group" id="password-1758-show-messages" aria-live="assertive">
                                                        </div>
                                                    </div>
                                                    <p>
                                                      <a href="#" class="fr-link" target="_blank" rel="noopener">Mot de passe oublié ?</a> 
                                                      
                                                    </p>
                                                </div>
                                            </div>
                                            <div class="fr-messages-group" id="credentials-messages" aria-live="assertive">
                                            </div>
                                        </fieldset>
                                    </div>
                                    <div class="fr-fieldset__element">
                                        <div class="fr-checkbox-group fr-checkbox-group--sm">
                                            <input name="remember" id="remember-1759" type="checkbox" aria-describedby="remember-1759-messages">
                                            <label class="fr-label" for="remember-1759">
                                                Se souvenir de moi
                                            </label>
                                            <div class="fr-messages-group" id="remember-1759-messages" aria-live="assertive">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="fr-fieldset__element">
                                        <ul class="fr-btns-group">
                                            <li>
                                                reactiver se connecter dsfr -->
                                                <!--  <button class="fr-mt-2v fr-btn" href="login.html">
                                                <button class="fr-btn" id="login-button-redirect">
                                                    Se connecter
                                                </button>
                                            </li>
                                        </ul>
                                    </div>
                                    <div class="fr-messages-group" id="login-1760-fieldset-messages" aria-live="assertive">
                                    </div>
                                </fieldset>
                            </form>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </dialog>
    -->
    <!-- END Modal login  -->
    <!--  -->

    <!-- Script en version es6 module et nomodule pour les navigateurs le ne supportant pas -->
    <script type="module" src="node_modules/@gouvfr/dsfr/dist/dsfr.module.min.js"></script>
    <script type="text/javascript" nomodule src="node_modules/@gouvfr/dsfr/dist/dsfr.nomodule.min.js"></script>
    <!-- internal -->
    <script src="js/clonelayers.js"></script>
    <script src="js/init.js"></script>
    <script src="js/map_interactions.js"></script>
    <script src="js/front_interactions.js"></script>
    <script src="js/api_interactions.js"></script>
    <script src="js/gallica_interactions.js"></script>
    <script src="js/getParamAtStartup.js"></script>
    <script src="js/nakala_test_deposit.js"></script>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        // Vérifier l'état d'authentification au chargement de la page
        checkAuthStatus();
        
        const loginButton = document.getElementById('login-button-redirect');
        if (loginButton) {
        loginButton.addEventListener('click', (e) => {
            e.preventDefault(); // empêche un submit par défaut
            // Optionnel : fermer la modale proprement avant de rediriger
            const modal = document.getElementById('fr-modal-login');
            if (modal && typeof modal.close === 'function') {
            modal.close();
            }
            // Redirection
            window.location.href = 'login.html';
        });
        }
    });
    </script>

  </body>
</html>